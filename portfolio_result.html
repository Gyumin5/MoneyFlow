
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cap Defend V12 Recommendation</title>
        <style>
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background: #f0f2f5; margin: 0; padding: 10px; color: #333; }
            .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
            h1 { color: #1a73e8; font-size: 1.5rem; margin-bottom: 5px; border-bottom: none; }
            h2 { font-size: 1.2rem; color: #202124; margin-top: 25px; border-bottom: 2px solid #f1f3f4; padding-bottom: 10px; }
            h3 { font-size: 1.1rem; margin-top: 0; }
            p { line-height: 1.5; margin: 5px 0; font-size: 0.95rem; }
            
            /* Responsive Tables */
            .table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; margin: 10px 0; border-radius: 8px; border: 1px solid #e0e0e0; }
            table { width: 100%; border-collapse: collapse; white-space: nowrap; }
            th, td { padding: 12px 15px; border-bottom: 1px solid #f1f3f4; text-align: left; font-size: 0.9rem; }
            th { background: #f8f9fa; color: #5f6368; font-weight: 600; position: sticky; top: 0; }
            tr:last-child td { border-bottom: none; }
            
            /* Cards & Grid */
            .dashboard-grid { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
            @media (min-width: 600px) { .dashboard-grid { flex-direction: row; } }
            
            .card { background: #fff; padding: 20px; border-radius: 12px; border: 1px solid #e0e0e0; flex: 1; }
            
            /* Status Bar */
            .status-bar { display: flex; flex-wrap: wrap; gap: 10px; background: #e8f0fe; padding: 15px; border-radius: 12px; margin-bottom: 20px; color: #1967d2; font-weight: 500; font-size: 0.9rem; }
            .status-bar div { flex: 1 1 auto; white-space: nowrap; }
            
            /* Calculator */
            .calc-grid { display: flex; flex-direction: column; gap: 15px; }
            @media (min-width: 600px) { .calc-grid { flex-direction: row; } }
            .calc-box { background: #f8f9fa; padding: 15px; border-radius: 12px; border: 1px solid #e0e0e0; flex: 1; }
            
            input, button { width: 100%; padding: 12px; margin: 5px 0; border-radius: 8px; border: 1px solid #dadce0; font-size: 1rem; box-sizing: border-box; }
            button { background: #1a73e8; color: white; border: none; font-weight: 600; cursor: pointer; transition: background 0.2s; }
            button:active { background: #1765cc; }
            
            .calculator { background: #fff; padding: 20px; border-radius: 12px; border: 1px solid #e0e0e0; margin-top: 25px; }
            
            /* Utils */
            .error { color: #d93025; background: #fce8e6; padding: 10px; border-radius: 8px; }
            .small-text { font-size: 0.85rem; color: #5f6368; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üöÄ Cap Defend V12</h1>
            <p class="small-text">Í∏∞Ï§ÄÏùº: 2026-01-07 | V11: Health-Check Forced Rebalancing</p>
            
            <div class="dashboard-grid">
                <div class="card">
                    <h3>üõ°Ô∏è Market Signal</h3>
                    <div style='display:flex; gap: 10px; margin-bottom: 20px;'><div><strong>BTC:</strong> <span style='background:#27ae60; color:white; padding:4px 8px; border-radius:4px; font-weight:bold;'>+4.00%</span> (vs MA50)</div><div><strong>VT:</strong> <span style='background:#27ae60; color:white; padding:4px 8px; border-radius:4px; font-weight:bold;'>+11.58%</span> (vs MA200)</div><div><strong>EEM:</strong> <span style='background:#27ae60; color:white; padding:4px 8px; border-radius:4px; font-weight:bold;'>+16.79%</span> (vs MA200)</div></div>
                </div>
                <div class="card">
                    <h3>üß† Strategy Insights</h3>
                    <p><strong>Top Mom:</strong> GLD, EEM, VEA</p>
                    <p><strong>Top Qual:</strong> GLD, EEM, VEA</p>
                </div>
            </div>

            <div class="status-bar">
                <div>üìâ Ï£ºÏãù: Í≥µÍ≤© Î™®Îìú</div>
                <div>ü™ô ÏΩîÏù∏: Full Invest</div>
                <div>üîÑ ÌÑ¥Ïò§Î≤Ñ: 42.2%</div>
            </div>

            <h2>üìä ÏµúÏ¢Ö Ï∂îÏ≤ú Ìè¨Ìä∏Ìè¥Î¶¨Ïò§</h2>
            <div class="table-wrap">
                <table>
                    <thead><tr><th>Ï¢ÖÎ™©</th><th>ÏûêÏÇ∞Íµ∞</th><th>ÎπÑÏ§ë</th></tr></thead>
                    <tbody><tr><td>VEA</td><td>Ï£ºÏãù</td><td>20.00%</td></tr><tr><td>GLD</td><td>Ï£ºÏãù</td><td>20.00%</td></tr><tr><td>EEM</td><td>Ï£ºÏãù</td><td>20.00%</td></tr><tr><td>TRX-USD</td><td>ÏΩîÏù∏</td><td>16.88%</td></tr><tr><td>ETH-USD</td><td>ÏΩîÏù∏</td><td>7.09%</td></tr><tr><td>XRP-USD</td><td>ÏΩîÏù∏</td><td>6.30%</td></tr><tr><td>BCH-USD</td><td>ÏΩîÏù∏</td><td>6.09%</td></tr><tr><td>POL-USD</td><td>ÏΩîÏù∏</td><td>3.64%</td></tr></tbody>
                </table>
            </div>

            <h2>üßÆ Ìà¨Ïûê Î∞∞Î∂Ñ Í≥ÑÏÇ∞Í∏∞</h2>
            <div class="calc-grid">
                <div class="calc-box">
                    <h3>üí∞ Ï†ÑÏ≤¥ Ìà¨ÏûêÍ∏à</h3>
                    <input type="number" id="invest-amt" placeholder="Ï†ÑÏ≤¥ Ìà¨ÏûêÍ∏à (Ïõê)" style="width:90%">
                    <button onclick="calc('total')" style="width:100%">Í≥ÑÏÇ∞ (6:4 Î∞∞Î∂Ñ)</button>
                </div>
                <div class="calc-box">
                    <h3>üìà Ï£ºÏãùÎßå Í≥ÑÏÇ∞</h3>
                    <input type="number" id="stock-amt" placeholder="Ï£ºÏãù Ìà¨ÏûêÍ∏à (Ïõê)" style="width:90%">
                    <button onclick="calc('stock')" style="width:100%">Ï£ºÏãù Î∞∞Î∂Ñ</button>
                </div>
                <div class="calc-box">
                    <h3>ü™ô ÏΩîÏù∏Îßå Í≥ÑÏÇ∞</h3>
                    <input type="number" id="coin-amt" placeholder="ÏΩîÏù∏ Ìà¨ÏûêÍ∏à (Ïõê)" style="width:90%">
                    <button onclick="calc('coin')" style="width:100%">ÏΩîÏù∏ Î∞∞Î∂Ñ</button>
                </div>
            </div>
            <div id="calc-res" class="calculator" style="display:none;"></div>

            <div class="calculator">
                <h3>ü™ô ÏΩîÏù∏ ÌÑ¥Ïò§Î≤Ñ Í≥ÑÏÇ∞Í∏∞</h3>
                <p>ÌòÑÏû¨ Î≥¥Ïú† ÏΩîÏù∏ ÏûÖÎ†• Ïãú Ï∂îÏ≤ú Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ÏôÄÏùò Ï∞®Ïù¥Î•º Í≥ÑÏÇ∞Ìï©ÎãàÎã§.</p>
                <div id="my-assets">
                    <!-- JS generated rows -->
                </div>
                <button onclick="calcTurnover()">ÎÇ¥ ÌÑ¥Ïò§Î≤Ñ Í≥ÑÏÇ∞</button>
                <div id="turnover-res"></div>
            </div>

            <h2>üìú ÏÉÅÏÑ∏ Î∂ÑÏÑù Î°úÍ∑∏</h2>
            <h2>üõ∞Ô∏è Step 1: ÏΩîÏù∏ Ïú†ÎãàÎ≤ÑÏä§ ÏÑ†Ï†ï (V12: Live CoinGecko Top 50)</h2><p>ÏÑ†Ï†ïÎêú Ïú†ÎãàÎ≤ÑÏä§ (31Í∞ú): Live CoinGecko Top 50, filtered by Upbit</p><p><small>['BTC-USD', 'ETH-USD', 'XRP-USD', 'SOL-USD', 'TRX-USD', 'DOGE-USD', 'ADA-USD', 'BCH-USD', 'LINK-USD', 'XLM-USD']...</small></p><h2>üì• Step 2: Îç∞Ïù¥ÌÑ∞ Îã§Ïö¥Î°úÎìú (Yahoo Ïö∞ÏÑ†)</h2><h2>üìà Ï£ºÏãù Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î∂ÑÏÑù (V11)</h2><p><b>[Canary]</b> VT: $144.14 (+11.58%) | EEM: $57.28 (+16.79%) vs MA200</p><p>‚úÖ <b>Risk-On (Í≥µÍ≤©)</b>: VTÏôÄ EEM Î™®Îëê 200ÏùºÏÑ† ÏÉÅÌöå</p><h4>üöÄ Í≥µÍ≤© Î™®Îìú: Ìå©ÌÑ∞ Ïú†ÎãàÎ≤ÑÏä§(V3) ÏÑ†Ï†ï</h4><h5>Ìå©ÌÑ∞ Ï†êÏàò:</h5><div class='table-wrap'><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Mom</th>
      <th>Qual</th>
    </tr>
    <tr>
      <th>Ticker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SPY</th>
      <td>0.092484</td>
      <td>2.174230</td>
    </tr>
    <tr>
      <th>QQQ</th>
      <td>0.098630</td>
      <td>1.743541</td>
    </tr>
    <tr>
      <th>EFA</th>
      <td>0.131925</td>
      <td>2.066809</td>
    </tr>
    <tr>
      <th>EEM</th>
      <td>0.174517</td>
      <td>2.748629</td>
    </tr>
    <tr>
      <th>VT</th>
      <td>0.110578</td>
      <td>2.393589</td>
    </tr>
    <tr>
      <th>VEA</th>
      <td>0.156619</td>
      <td>2.560530</td>
    </tr>
    <tr>
      <th>GLD</th>
      <td>0.311205</td>
      <td>3.155870</td>
    </tr>
    <tr>
      <th>PDBC</th>
      <td>0.052383</td>
      <td>0.949151</td>
    </tr>
    <tr>
      <th>QUAL</th>
      <td>0.080861</td>
      <td>2.066585</td>
    </tr>
    <tr>
      <th>MTUM</th>
      <td>0.088852</td>
      <td>1.367454</td>
    </tr>
    <tr>
      <th>IQLT</th>
      <td>0.106957</td>
      <td>1.659407</td>
    </tr>
    <tr>
      <th>IMTM</th>
      <td>0.152262</td>
      <td>2.257934</td>
    </tr>
  </tbody>
</table></div><p>ÏµúÏ¢Ö Ï£ºÏãù Ìè¨Ìä∏Ìè¥Î¶¨Ïò§: <b>['VEA', 'GLD', 'EEM']</b></p><p>Ï£ºÏãù ÏÉÅÌÉú Ïú†ÏßÄ Ï§ë (Í≥µÍ≤© Î™®Îìú)</p>
            <h3>ü™ô ÏΩîÏù∏ Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ (V12: Top 50 + 10% Vol Cap) (2026-01-07)</h3><p>[BTC Canary] $92,792 (+4.00%) vs MA50 $89,225</p><div class='table-wrap'><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>Coin</th>
      <th>Price</th>
      <th>SMA30</th>
      <th>Mom21</th>
      <th>Vol90d</th>
      <th>Score</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SUI-USD</td>
      <td>$0.000300</td>
      <td>$0.000364</td>
      <td>-43.29%</td>
      <td>0.4263</td>
      <td>4.09</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>MNT-USD</td>
      <td>$0.122335</td>
      <td>$0.069278</td>
      <td>143.67%</td>
      <td>0.1808</td>
      <td>2.69</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>BCH-USD</td>
      <td>$633.38</td>
      <td>$591.92</td>
      <td>15.97%</td>
      <td>0.0408</td>
      <td>1.82</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>POL-USD</td>
      <td>$0.008241</td>
      <td>$0.007257</td>
      <td>6.05%</td>
      <td>0.0684</td>
      <td>0.75</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ETH-USD</td>
      <td>$3,267.64</td>
      <td>$3,040.45</td>
      <td>10.24%</td>
      <td>0.0350</td>
      <td>0.49</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>UNI-USD</td>
      <td>$0.000163</td>
      <td>$0.000167</td>
      <td>-6.86%</td>
      <td>0.0282</td>
      <td>0.10</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>FIL-USD</td>
      <td>$1.57</td>
      <td>$1.36</td>
      <td>21.91%</td>
      <td>0.1059</td>
      <td>0.03</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>PEPE-USD</td>
      <td>$0.000006</td>
      <td>$0.000006</td>
      <td>0.00%</td>
      <td>0.0708</td>
      <td>0.00</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>TRX-USD</td>
      <td>$0.294167</td>
      <td>$0.283170</td>
      <td>4.93%</td>
      <td>0.0147</td>
      <td>-0.15</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>XRP-USD</td>
      <td>$2.29</td>
      <td>$1.96</td>
      <td>18.51%</td>
      <td>0.0394</td>
      <td>-0.20</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>NEAR-USD</td>
      <td>$1.77</td>
      <td>$1.60</td>
      <td>12.92%</td>
      <td>0.0597</td>
      <td>-0.34</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>BONK-USD</td>
      <td>$0.000012</td>
      <td>$0.000009</td>
      <td>30.72%</td>
      <td>0.0771</td>
      <td>-0.36</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>SHIB-USD</td>
      <td>$0.000009</td>
      <td>$0.000008</td>
      <td>12.33%</td>
      <td>0.0561</td>
      <td>-0.38</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>DOGE-USD</td>
      <td>$0.148446</td>
      <td>$0.133259</td>
      <td>12.68%</td>
      <td>0.0468</td>
      <td>-0.50</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>RENDER-USD</td>
      <td>$2.32</td>
      <td>$1.48</td>
      <td>65.91%</td>
      <td>0.0711</td>
      <td>-0.60</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>SOL-USD</td>
      <td>$140.33</td>
      <td>$128.59</td>
      <td>8.57%</td>
      <td>0.0398</td>
      <td>-0.76</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>TRUMP-USD</td>
      <td>$0.000510</td>
      <td>$0.000475</td>
      <td>8.28%</td>
      <td>0.0341</td>
      <td>-0.77</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>AAVE-USD</td>
      <td>$173.28</td>
      <td>$170.77</td>
      <td>-6.89%</td>
      <td>0.0507</td>
      <td>-0.83</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>BTC-USD</td>
      <td>$92,791.61</td>
      <td>$89,056.08</td>
      <td>5.63%</td>
      <td>0.0215</td>
      <td>-0.90</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ARB-USD</td>
      <td>$0.000899</td>
      <td>$0.001129</td>
      <td>-23.47%</td>
      <td>0.0248</td>
      <td>-0.90</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>APT-USD</td>
      <td>$0.000131</td>
      <td>$0.000133</td>
      <td>-0.76%</td>
      <td>0.0357</td>
      <td>-0.93</td>
      <td>üî¥</td>
    </tr>
    <tr>
      <td>LINK-USD</td>
      <td>$13.83</td>
      <td>$12.94</td>
      <td>6.95%</td>
      <td>0.0455</td>
      <td>-0.96</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ETC-USD</td>
      <td>$13.10</td>
      <td>$12.48</td>
      <td>3.32%</td>
      <td>0.0485</td>
      <td>-1.03</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>XLM-USD</td>
      <td>$0.240041</td>
      <td>$0.224116</td>
      <td>9.34%</td>
      <td>0.0389</td>
      <td>-1.07</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>AVAX-USD</td>
      <td>$14.49</td>
      <td>$12.93</td>
      <td>17.36%</td>
      <td>0.0489</td>
      <td>-1.16</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>HBAR-USD</td>
      <td>$0.126742</td>
      <td>$0.118004</td>
      <td>10.69%</td>
      <td>0.0498</td>
      <td>-1.35</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>DOT-USD</td>
      <td>$2.20</td>
      <td>$1.94</td>
      <td>15.83%</td>
      <td>0.0557</td>
      <td>-1.51</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ALGO-USD</td>
      <td>$0.139939</td>
      <td>$0.121215</td>
      <td>19.75%</td>
      <td>0.0456</td>
      <td>-1.53</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>VET-USD</td>
      <td>$0.012605</td>
      <td>$0.011226</td>
      <td>16.13%</td>
      <td>0.0523</td>
      <td>-2.08</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ADA-USD</td>
      <td>$0.414249</td>
      <td>$0.384630</td>
      <td>7.39%</td>
      <td>0.0485</td>
      <td>-2.09</td>
      <td>üü¢</td>
    </tr>
    <tr>
      <td>ONDO-USD</td>
      <td>$0.446813</td>
      <td>$0.414935</td>
      <td>7.68%</td>
      <td>0.0493</td>
      <td>-2.44</td>
      <td>üü¢</td>
    </tr>
  </tbody>
</table></div><p>‚úÖ <b>Risk-On</b>: Í∞ïÏÑ∏Ïû•. ÏΩîÏù∏ Ìà¨Ïûê ÏßÑÌñâ.</p><h4>üèÜ ÏµúÏ¢Ö ÏÑ†Î∞ú (Sharpe V11)</h4><div class='table-wrap'><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Coin</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>BCH-USD</td>
      <td>1.82</td>
    </tr>
    <tr>
      <th>1</th>
      <td>POL-USD</td>
      <td>0.75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ETH-USD</td>
      <td>0.49</td>
    </tr>
    <tr>
      <th>3</th>
      <td>TRX-USD</td>
      <td>-0.15</td>
    </tr>
    <tr>
      <th>4</th>
      <td>XRP-USD</td>
      <td>-0.20</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NEAR-USD</td>
      <td>-0.34</td>
    </tr>
    <tr>
      <th>6</th>
      <td>BONK-USD</td>
      <td>-0.36</td>
    </tr>
    <tr>
      <th>7</th>
      <td>SHIB-USD</td>
      <td>-0.38</td>
    </tr>
    <tr>
      <th>8</th>
      <td>DOGE-USD</td>
      <td>-0.50</td>
    </tr>
    <tr>
      <th>9</th>
      <td>RENDER-USD</td>
      <td>-0.60</td>
    </tr>
  </tbody>
</table></div><p>Selection (Top 5 Sharpe): <b>['BCH-USD', 'POL-USD', 'ETH-USD', 'TRX-USD', 'XRP-USD']</b></p><div class='table-wrap'><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>Coin</th>
      <th>Vol(90d)</th>
      <th>Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BCH-USD</td>
      <td>0.0408</td>
      <td>15.24%</td>
    </tr>
    <tr>
      <td>POL-USD</td>
      <td>0.0684</td>
      <td>9.09%</td>
    </tr>
    <tr>
      <td>ETH-USD</td>
      <td>0.0350</td>
      <td>17.73%</td>
    </tr>
    <tr>
      <td>TRX-USD</td>
      <td>0.0147</td>
      <td>42.19%</td>
    </tr>
    <tr>
      <td>XRP-USD</td>
      <td>0.0394</td>
      <td>15.76%</td>
    </tr>
  </tbody>
</table></div>

        </div>

        <script>
            const finalP = {"VEA": 0.19999999999999998, "GLD": 0.19999999999999998, "EEM": 0.19999999999999998, "TRX-USD": 0.16876377694468156, "ETH-USD": 0.07091239824014674, "XRP-USD": 0.06303018293702518, "BCH-USD": 0.06094296505550089, "POL-USD": 0.0363506768226456};
            const stockP = {"VEA": 0.3333333333333333, "GLD": 0.3333333333333333, "EEM": 0.3333333333333333};
            const coinP = {"BCH-USD": 0.15235741263875224, "POL-USD": 0.09087669205661401, "ETH-USD": 0.17728099560036686, "TRX-USD": 0.42190944236170397, "XRP-USD": 0.15757545734256298};
            
            const prices = {"VEA": 93195.41911315918, "GLD": 600350.5293579103, "EEM": 83227.83822631837, "BCH-USD": 919500.0, "POL-USD": 184.0, "ETH-USD": 4750000.0, "TRX-USD": 427.0, "XRP-USD": 3310.0};
            const symMap = {"BCH": "BCH-USD", "POL": "POL-USD", "ETH": "ETH-USD", "TRX": "TRX-USD", "XRP": "XRP-USD"};
            const healthStatus = {"BTC-USD": true, "ETH-USD": true, "XRP-USD": true, "SOL-USD": true, "TRX-USD": true, "DOGE-USD": true, "ADA-USD": true, "BCH-USD": true, "LINK-USD": true, "XLM-USD": true, "SUI-USD": false, "AVAX-USD": true, "HBAR-USD": true, "SHIB-USD": true, "UNI-USD": false, "DOT-USD": true, "MNT-USD": true, "PEPE-USD": false, "AAVE-USD": false, "NEAR-USD": true, "ETC-USD": true, "APT-USD": false, "ONDO-USD": true, "POL-USD": true, "ARB-USD": false, "ALGO-USD": true, "RENDER-USD": true, "FIL-USD": true, "TRUMP-USD": true, "VET-USD": true, "BONK-USD": true};

            function fmt(n) { return new Intl.NumberFormat('ko-KR').format(Math.round(n)) + ' Ïõê'; }

            function calc(type) {
                let amt = 0;
                let port = {};
                let title = "";
                
                if(type === 'total') {
                    amt = parseFloat(document.getElementById('invest-amt').value);
                    port = finalP;
                    title = "Ï†ÑÏ≤¥ Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î∞∞Î∂Ñ Í≤∞Í≥º (Ï£ºÏãù 60% : ÏΩîÏù∏ 40%)";
                } else if(type === 'stock') {
                    amt = parseFloat(document.getElementById('stock-amt').value);
                    port = stockP;
                    title = "Ï£ºÏãù Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î∞∞Î∂Ñ Í≤∞Í≥º (Ï£ºÏãù 100%)";
                } else if(type === 'coin') {
                    amt = parseFloat(document.getElementById('coin-amt').value);
                    port = coinP;
                    title = "ÏΩîÏù∏ Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Î∞∞Î∂Ñ Í≤∞Í≥º (ÏΩîÏù∏ 100%)";
                }
                
                if(!amt) return;
                
                let h = `<h3>${title}</h3><div class="table-wrap">`;
                h += '<table><thead><tr><th>Ï¢ÖÎ™©</th><th>ÎπÑÏ§ë</th><th>Í∏àÏï°</th><th>Îã®Í∞Ä</th><th>ÏàòÎüâ</th></tr></thead><tbody>';
                
                let sortedKeys = Object.keys(port).sort((a,b) => port[b] - port[a]);
                
                for(let k of sortedKeys) {
                    const w = port[k];
                    const val = amt * w;
                    let pr = prices[k] || 0;
                    let qty = pr > 0 ? (val/pr).toFixed(4) : '-';
                    h += `<tr><td>${k}</td><td>${(w*100).toFixed(1)}%</td><td>${fmt(val)}</td><td>${fmt(pr)}</td><td>${qty}</td></tr>`;
                }
                h += '</tbody></table></div>';
                
                const resDiv = document.getElementById('calc-res');
                resDiv.style.display = 'block';
                resDiv.innerHTML = h;
            }

            // Init User Input Rows
            let rows = '<div class="table-wrap"><table>';
            for(let i=0; i<6; i++) {
                rows += `<tr><td><input class="u-tick" placeholder="Ticker (e.g. BTC)"></td><td><input class="u-amt" type="number" placeholder="Value (KRW)"></td></tr>`;
            }
            rows += '</table></div>';
            document.getElementById('my-assets').innerHTML = rows;

            function calcTurnover() {
               const inputs = document.querySelectorAll('.u-tick');
               const amts = document.querySelectorAll('.u-amt');
               let myP = {}, tot = 0;
               
               inputs.forEach((inp, i) => {
                   let t = inp.value.toUpperCase().trim();
                   let v = parseFloat(amts[i].value);
                   if(t && v > 0) {
                       if(symMap[t]) t = symMap[t];
                       else if(t !== 'CASH' && !t.endsWith('-USD')) t += '-USD';
                       
                       myP[t] = (myP[t]||0) + v;
                       tot += v;
                   }
               });
               
               if(tot===0) return;
               
               let myW = {};
               for(let k in myP) myW[k] = myP[k]/tot;
               
               let diff = 0;
                let allK = new Set([...Object.keys(myW), ...Object.keys(coinP)]);
                
                let h = '<div class="table-wrap"><table><thead><tr><th>Asset</th><th>My</th><th>Target</th><th>Diff</th></tr></thead><tbody>';
               
               allK.forEach(k => {
                   let w1 = myW[k] || 0;
                   let w2 = coinP[k] || 0;
                   let d = Math.abs(w1-w2);
                   diff += d;
                    h += `<tr><td>${k}</td><td>${(w1*100).toFixed(1)}%</td><td>${(w2*100).toFixed(1)}%</td><td>${(d*100).toFixed(1)}%</td></tr>`;
                });
                diff /= 2;
                h += '</tbody></table></div>';
               
               // V11: Check health status of my coins
               // Warn if coin is NOT healthy (false) OR not in the list (undefined)
               let unhealthyCoins = [];
               for(let k in myW) {
                   if(healthStatus[k] !== true) {
                       unhealthyCoins.push(k);
                   }
               }
               
               let alertHtml = '';
               if(unhealthyCoins.length > 0) {
                   alertHtml = `<div style="background:#e74c3c; color:white; padding:15px; border-radius:8px; margin:10px 0;">
                       <h3>üö® Ï¶âÏãú Î¶¨Î∞∏Îü∞Ïã± ÌïÑÏöî! (V11 Health-Check)</h3>
                       <p>Î≥¥Ïú† Ï§ëÏù∏ ÏΩîÏù∏Ïù¥ Ìó¨Ïä§Ï≤¥ÌÅ¨ Ïã§Ìå®: <strong>${unhealthyCoins.join(', ')}</strong></p>
                       <p>ÌÑ¥Ïò§Î≤Ñ 30% Ï°∞Í±¥Í≥º Í¥ÄÍ≥ÑÏóÜÏù¥ Ï¶âÏãú Îß§Îß§ÌïòÏÑ∏Ïöî!</p>
                   </div>`;
               }
               
               document.getElementById('turnover-res').innerHTML = alertHtml + `<h3>Turnover: ${ (diff*100).toFixed(2) }%</h3>` + h;
            }
        </script>
    </body>
    </html>
    