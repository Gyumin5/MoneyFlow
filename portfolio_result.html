
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>자동 포트폴리오 추천 (v7)</title>
        <style>
            body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; margin: 20px; background-color: #f9f9f9; color: #333; line-height: 1.6; }
            .container { max-width: 900px; margin: auto; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
            h1, h2, h3, h4, h5 { color: #2c3e50; border-bottom: 1px solid #eaecef; padding-bottom: 10px; }
            h1 { font-size: 2em; margin-bottom: 0; }
            h2.subtitle { font-size: 1.2em; color: #888; border: none; margin-top: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; margin-bottom: 20px; font-size: 0.9em; }
            th, td { padding: 8px; border: 1px solid #ddd; text-align: left; }
            th { background-color: #f2f2f2; }
            .final-table th { background-color: #3498db; color: white; }
            .footer { margin-top: 20px; font-size: 0.9em; color: #888; text-align: center; }
            p { margin: 10px 0; }
            .error { color: #e74c3c; }
            .small-table table { width: auto; }
            .dataframe { border-collapse: collapse; width: auto; margin-bottom: 15px; }
            .dataframe th, .dataframe td { padding: 5px 8px; border: 1px solid #ccc; text-align: right; }
            .dataframe thead th { background-color: #f2f2f2; text-align: center; }
            .calculator-container { background-color: #f8f9fa; border: 1px solid #e9ecef; padding: 20px; margin-top: 30px; border-radius: 8px; }
            .calculator-container input[type="number"] { width: 200px; padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }
            .calculator-container button { padding: 8px 15px; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; }
            .calculator-container button:hover { background-color: #2980b9; }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>🏆 최종 v7 포트폴리오 추천 🏆</h1>
            <h2 class="subtitle">
            (2025년 10월 05일 기준)</h2>
            <p><b>주식 전략 상태:</b> 공격 모드</p>
            <p><b>코인 전략 상태:</b> 강세장 (동적 비중)</p>
            <table class="final-table">
                <thead><tr><th>종목</th><th>자산군</th><th>최종 비중</th></tr></thead>
                <tbody>
                    <tr><td>Cash</td><td>현금</td><td>32.00%</td></tr><tr><td>EEM</td><td>주식</td><td>15.00%</td></tr><tr><td>GLD</td><td>주식</td><td>15.00%</td></tr><tr><td>QQQ</td><td>주식</td><td>15.00%</td></tr><tr><td>VT</td><td>주식</td><td>15.00%</td></tr><tr><td>BTC-USD</td><td>코인</td><td>8.00%</td></tr>
                </tbody>
                <tfoot><tr style="font-weight: bold;"><td colspan="2">총 합계</td><td>100.00%</td></tr></tfoot>
            </table>

            <div class="calculator-container">
                <h3>🧮 총 자산 배분 계산기</h3>
                <p>총 투자 예정 금액(원)을 입력하시면 각 자산에 얼마씩 배분해야 하는지 계산합니다.</p>
                <input type="number" id="total-assets-input" placeholder="총 자산액 (원)" min="0">
                <button id="calculate-total">계산하기</button>
                <div id="total-assets-results" style="margin-top: 15px;"></div>
            </div>

            <div class="calculator-container">
                <h3>🪙 코인 자산 배분 계산기</h3>
                <p>코인에만 투자할 총 금액(원)을 입력하시면 코인과 현금의 배분 금액을 계산합니다.</p>
                <input type="number" id="coin-assets-input" placeholder="코인 총 자산액 (원)" min="0">
                <button id="calculate-coin">계산하기</button>
                <div id="coin-assets-results" style="margin-top: 15px;"></div>
            </div>

            <h2>🔄 코인 포트폴리오 턴오버 분석</h2>
            <p>어제(2025-10-04)와 오늘(2025년 10월 05일) 코인 포트폴리오 간의 턴오버 비율: <b>20.00%</b></p>

            <hr>
            <h1>📜 상세 실행 로그</h1>
            <h2>🛰️ Step 1: 동적 코인 유니버스 선정 시작 (Live API)</h2><p>  - 1. CoinGecko API 호출: 글로벌 시가총액 상위 20위 코인 조회...</p><p>  - 2. Upbit 원화마켓 교차 확인 및 유동성 필터링...</p><p>    - 기준: 31일 평균/중간 거래대금 1십억 원 이상</p><p>    - 스테이블 코인 제외: USDC</p><p>    - 스테이블 코인 제외: USDT</p><p><b>  -> 최종 선정된 코인 유니버스 (10개):</b> ['ADA-USD', 'AVAX-USD', 'BTC-USD', 'DOGE-USD', 'ETH-USD', 'LINK-USD', 'SOL-USD', 'SUI-USD', 'TRX-USD', 'XRP-USD']</p><h3>✅ 동적 코인 유니버스 선정 완료</h3><h2>📥 Step 2: 필요 데이터 다운로드 및 업데이트 시작</h2><p>  - ADA-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - AVAX-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - BTC-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - DOGE-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - EEM 데이터 다운로드/업데이트 완료</p><p>  - EFA 데이터 다운로드/업데이트 완료</p><p>  - ETH-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - GLD 데이터 다운로드/업데이트 완료</p><p>  - IEF 데이터 다운로드/업데이트 완료</p><p>  - LINK-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - PDBC 데이터 다운로드/업데이트 완료</p><p>  - QQQ 데이터 다운로드/업데이트 완료</p><p>  - SOL-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - SPY 데이터 다운로드/업데이트 완료</p><p>  - SUI-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - TRX-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><p>  - VEA 데이터 다운로드/업데이트 완료</p><p>  - VNQ 데이터 다운로드/업데이트 완료</p><p>  - VT 데이터 다운로드/업데이트 완료</p><p>  - XRP-USD (CoinGecko) 데이터 다운로드/업데이트 완료</p><h3>✅ 데이터 준비 완료</h3><h2>🚀 Step 3: 전략 실행 및 포트폴리오 분석</h2><h2>📈 주식 포트폴리오 분석 시작 (60%)</h2><p>    - VT 최신(2025-10-03): $139.08 | 200일 MA: $123.23</p><p>    - EEM 최신(2025-10-03): $54.23 | 200일 MA: $45.92</p><p><b>    - [결과] ✅ 공격 모드</b></p><h4>  - 2단계 (공격 모드): 팩터 기반 자산 선정</h4><h5>    - [세부] 공격 모드 팩터 점수:</h5><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Momentum Score</th>
      <th>Quality (Sharpe)</th>
    </tr>
    <tr>
      <th>Ticker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>SPY</th>
      <td>0.16</td>
      <td>2.15</td>
    </tr>
    <tr>
      <th>QQQ</th>
      <td>0.20</td>
      <td>2.45</td>
    </tr>
    <tr>
      <th>EFA</th>
      <td>0.13</td>
      <td>2.02</td>
    </tr>
    <tr>
      <th>EEM</th>
      <td>0.19</td>
      <td>2.66</td>
    </tr>
    <tr>
      <th>VT</th>
      <td>0.16</td>
      <td>2.42</td>
    </tr>
    <tr>
      <th>VEA</th>
      <td>0.15</td>
      <td>2.36</td>
    </tr>
    <tr>
      <th>VNQ</th>
      <td>0.03</td>
      <td>0.71</td>
    </tr>
    <tr>
      <th>GLD</th>
      <td>0.25</td>
      <td>2.33</td>
    </tr>
    <tr>
      <th>PDBC</th>
      <td>0.01</td>
      <td>0.24</td>
    </tr>
  </tbody>
</table><p>    - <b>최종 주식 포트폴리오: ['EEM', 'GLD', 'QQQ', 'VT']</b></p>
            <h3>오늘 코인 포트폴리오 상세 로그 (2025년 10월 05일)</h3>
            <h3>코인 포트폴리오 분석 (기준일: 2025-10-05)</h3><h4>1. 카나리 신호 확인</h4><p>    - BTC 기준(종가 2025-10-05): $122,496.74 | 50일 MA: $113,819.91</p><p><b>    - [결과] ✅ 강세장. 코인 투자를 진행합니다.</b></p><h4>2. 헬스 체크 결과</h4><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>코인</th>
      <th>현재가</th>
      <th>30일 SMA</th>
      <th>SMA 통과</th>
      <th>21일 수익률</th>
      <th>수익률 통과</th>
      <th>최종 결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ADA-USD</td>
      <td>$0.84</td>
      <td>$0.85</td>
      <td>❌</td>
      <td>-5.29%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>AVAX-USD</td>
      <td>$29.98</td>
      <td>$30.14</td>
      <td>❌</td>
      <td>1.52%</td>
      <td>✅</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>BTC-USD</td>
      <td>$122,496.74</td>
      <td>$114,914.02</td>
      <td>✅</td>
      <td>6.17%</td>
      <td>✅</td>
      <td>🟢 건강</td>
    </tr>
    <tr>
      <td>DOGE-USD</td>
      <td>$0.25</td>
      <td>$0.25</td>
      <td>✅</td>
      <td>-9.50%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>ETH-USD</td>
      <td>$4,483.53</td>
      <td>$4,361.84</td>
      <td>✅</td>
      <td>-2.74%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>LINK-USD</td>
      <td>$22.12</td>
      <td>$22.74</td>
      <td>❌</td>
      <td>-8.26%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>SOL-USD</td>
      <td>$227.74</td>
      <td>$223.94</td>
      <td>✅</td>
      <td>-5.31%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>SUI-USD</td>
      <td>$3.58</td>
      <td>$3.51</td>
      <td>✅</td>
      <td>-2.93%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>TRX-USD</td>
      <td>$0.34</td>
      <td>$0.34</td>
      <td>✅</td>
      <td>-2.25%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>XRP-USD</td>
      <td>$2.97</td>
      <td>$2.95</td>
      <td>✅</td>
      <td>-2.06%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
  </tbody>
</table><p>    - <b>건강한 코인 수: 1개 -> 코인 투자 비중: 20%, 현금 비중: 80%</b></p><h4>3. 코인 선정 (샤프 지수 랭킹)</h4><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>코인</th>
      <th>126일 샤프</th>
      <th>252일 샤프</th>
      <th>종합 점수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BTC-USD</td>
      <td>0.08</td>
      <td>0.04</td>
      <td>0.12</td>
    </tr>
  </tbody>
</table><p>  - <b>상위 1개 코인 선정:</b> ['BTC-USD']</p><h4>4. 최종 비중 결정 (상관관계 조정)</h4><p>  - 상관관계 계산 불가. 역변동성 가중치 적용.</p><p>    - <b>최종 코인 포트폴리오: ['BTC-USD', 'Cash']</b></p>
            <h3>어제 코인 포트폴리오 상세 로그 (2025-10-04)</h3>
            <h3>코인 포트폴리오 분석 (기준일: 2025-10-04)</h3><h4>1. 카나리 신호 확인</h4><p>    - BTC 기준(종가 2025-10-04): $122,250.15 | 50일 MA: $113,619.18</p><p><b>    - [결과] ✅ 강세장. 코인 투자를 진행합니다.</b></p><h4>2. 헬스 체크 결과</h4><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>코인</th>
      <th>현재가</th>
      <th>30일 SMA</th>
      <th>SMA 통과</th>
      <th>21일 수익률</th>
      <th>수익률 통과</th>
      <th>최종 결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ADA-USD</td>
      <td>$0.87</td>
      <td>$0.85</td>
      <td>✅</td>
      <td>-5.51%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>AVAX-USD</td>
      <td>$31.38</td>
      <td>$29.76</td>
      <td>✅</td>
      <td>8.56%</td>
      <td>✅</td>
      <td>🟢 건강</td>
    </tr>
    <tr>
      <td>BTC-USD</td>
      <td>$122,250.15</td>
      <td>$114,131.00</td>
      <td>✅</td>
      <td>5.24%</td>
      <td>✅</td>
      <td>🟢 건강</td>
    </tr>
    <tr>
      <td>DOGE-USD</td>
      <td>$0.26</td>
      <td>$0.25</td>
      <td>✅</td>
      <td>-6.14%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>ETH-USD</td>
      <td>$4,515.76</td>
      <td>$4,349.62</td>
      <td>✅</td>
      <td>-4.10%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>LINK-USD</td>
      <td>$22.54</td>
      <td>$22.76</td>
      <td>❌</td>
      <td>-10.30%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>SOL-USD</td>
      <td>$233.06</td>
      <td>$222.28</td>
      <td>✅</td>
      <td>-3.79%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>SUI-USD</td>
      <td>$3.58</td>
      <td>$3.49</td>
      <td>✅</td>
      <td>-3.67%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>TRX-USD</td>
      <td>$0.34</td>
      <td>$0.34</td>
      <td>✅</td>
      <td>-2.96%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
    <tr>
      <td>XRP-USD</td>
      <td>$3.04</td>
      <td>$2.94</td>
      <td>✅</td>
      <td>-2.13%</td>
      <td>❌</td>
      <td>🔴 비건강</td>
    </tr>
  </tbody>
</table><p>    - <b>건강한 코인 수: 2개 -> 코인 투자 비중: 40%, 현금 비중: 60%</b></p><h4>3. 코인 선정 (샤프 지수 랭킹)</h4><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>코인</th>
      <th>126일 샤프</th>
      <th>252일 샤프</th>
      <th>종합 점수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BTC-USD</td>
      <td>0.09</td>
      <td>0.04</td>
      <td>0.13</td>
    </tr>
    <tr>
      <td>AVAX-USD</td>
      <td>0.10</td>
      <td>0.01</td>
      <td>0.12</td>
    </tr>
  </tbody>
</table><p>  - <b>상위 2개 코인 선정:</b> ['BTC-USD', 'AVAX-USD']</p><h4>4. 최종 비중 결정 (상관관계 조정)</h4><table border="1" class="dataframe dataframe small-table">
  <thead>
    <tr style="text-align: right;">
      <th>코인</th>
      <th>역변동성 점수</th>
      <th>다각화 점수</th>
      <th>최종 점수</th>
      <th>최종 비중</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BTC-USD</td>
      <td>59.35</td>
      <td>0.6</td>
      <td>35.42</td>
      <td>72.73%</td>
    </tr>
    <tr>
      <td>AVAX-USD</td>
      <td>22.25</td>
      <td>0.6</td>
      <td>13.28</td>
      <td>27.27%</td>
    </tr>
  </tbody>
</table><p>    - <b>최종 코인 포트폴리오: ['BTC-USD', 'AVAX-USD', 'Cash']</b></p>

            <div class="footer">마지막 업데이트: 2025년 10월 05일 11:29:39 KST</div>
        </div>
        <script>
            const finalPortfolio = {"Cash": 0.32000000000000006, "EEM": 0.15, "GLD": 0.15, "QQQ": 0.15, "VT": 0.15, "BTC-USD": 0.08000000000000002};
            const coinStrategyPortfolio = {"BTC-USD": 0.2, "Cash": 0.8};

            function formatKRW(num) {
                return new Intl.NumberFormat('ko-KR').format(num) + ' 원';
            }

            document.getElementById('calculate-total').addEventListener('click', function() {
                const totalValue = parseFloat(document.getElementById('total-assets-input').value);
                const resultsDiv = document.getElementById('total-assets-results');
                if (isNaN(totalValue) || totalValue <= 0) {
                    resultsDiv.innerHTML = '<p style="color:red;">유효한 금액을 입력하세요.</p>';
                    return;
                }
                
                let tableHtml = '<table class="small-table"><thead><tr><th>종목</th><th>예상 배분 금액</th></tr></thead><tbody>';
                const sortedItems = Object.entries(finalPortfolio).sort(([,a],[,b]) => b-a);
                for (const [ticker, weight] of sortedItems) {
                    const amount = totalValue * weight;
                    tableHtml += `<tr><td>${ticker}</td><td>${formatKRW(Math.round(amount))}</td></tr>`;
                }
                tableHtml += '</tbody></table>';
                resultsDiv.innerHTML = tableHtml;
            });

            document.getElementById('calculate-coin').addEventListener('click', function() {
                const totalValue = parseFloat(document.getElementById('coin-assets-input').value);
                const resultsDiv = document.getElementById('coin-assets-results');
                if (isNaN(totalValue) || totalValue <= 0) {
                    resultsDiv.innerHTML = '<p style="color:red;">유효한 금액을 입력하세요.</p>';
                    return;
                }

                let tableHtml = '<table class="small-table"><thead><tr><th>자산</th><th>예상 배분 금액</th></tr></thead><tbody>';
                const sortedItems = Object.entries(coinStrategyPortfolio).sort(([,a],[,b]) => b-a);
                for (const [ticker, weight] of sortedItems) {
                    const amount = totalValue * weight;
                    tableHtml += `<tr><td>${ticker}</td><td>${formatKRW(Math.round(amount))}</td></tr>`;
                }
                tableHtml += '</tbody></table>';
                resultsDiv.innerHTML = tableHtml;
            });
        </script>
    </body>
    </html>
    